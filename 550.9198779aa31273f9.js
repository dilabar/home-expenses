"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[550],{550:(d,u,n)=>{n.r(u),n.d(u,{CreatePinPage:()=>p});var g=n(177),_=n(4341),a=n(4702),e=n(4438),P=n(4796),E=n(5260);let p=(()=>{var o;class h{constructor(t,r){this.authService=t,this.router=r,this.pin="",this.confirmPin=""}ngOnInit(){}createPin(){this.pin===this.confirmPin?this.authService.setPin(this.pin).subscribe(t=>{t.status&&this.router.navigate(["tabs"])}):alert("PINs do not match!")}}return(o=h).\u0275fac=function(t){return new(t||o)(e.rXU(P.u),e.rXU(E.Ix))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-create-pin"]],standalone:!0,features:[e.aNF],decls:16,vars:4,consts:[[3,"translucent"],[1,"ion-padding",3,"fullscreen"],[3,"submit"],["position","floating"],["type","password","name","pin","required","",3,"ngModelChange","ngModel"],["type","password","name","confirmPin","required","",3,"ngModelChange","ngModel"],["expand","full","type","submit"]],template:function(t,r){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Create PIN"),e.k0s()()(),e.j41(4,"ion-content",1)(5,"form",2),e.bIt("submit",function(){return r.createPin()}),e.j41(6,"ion-item")(7,"ion-label",3),e.EFF(8,"Enter PIN"),e.k0s(),e.j41(9,"ion-input",4),e.mxI("ngModelChange",function(s){return e.DH7(r.pin,s)||(r.pin=s),s}),e.k0s()(),e.j41(10,"ion-item")(11,"ion-label",3),e.EFF(12,"Confirm PIN"),e.k0s(),e.j41(13,"ion-input",5),e.mxI("ngModelChange",function(s){return e.DH7(r.confirmPin,s)||(r.confirmPin=s),s}),e.k0s()(),e.j41(14,"ion-button",6),e.EFF(15,"Create PIN"),e.k0s()()()),2&t&&(e.Y8G("translucent",!0),e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(5),e.R50("ngModel",r.pin),e.R7$(4),e.R50("ngModel",r.confirmPin))},dependencies:[a.$w,a.eU,a.W9,a.uz,a.ai,a.he,a.Jm,a.BC,g.MD,_.YN,_.qT,_.BC,_.cb,_.YS,_.vS,_.cV]}),h})()},4796:(d,u,n)=>{n.d(u,{u:()=>p});var g=n(5312),_=n(8141),a=n(4438),e=n(7360),P=n(4743),E=n(5260);let p=(()=>{var o;class h{constructor(t,r,i){this.reqres=t,this.tokenStorage=r,this.router=i,this.apiUrl=g.c.baseUrl+"api/"}login(t,r,i){let s={email:t};return r?s.password=r:i&&(s.pin=i),this.reqres.post(this.apiUrl+"login",s).pipe((0,_.M)(l=>{l&&l.token&&(this.tokenStorage.setToken(l.token),this.tokenStorage.setUserData(l.user))}))}logout(){return this.reqres.post(this.apiUrl+"logout",{},!0).pipe((0,_.M)(t=>{t.status?this.tokenStorage.removeToken():this.router.navigate(["/login"])}))}setPin(t){return this.reqres.post(this.apiUrl+"set_pin",{pin:t},!0).pipe((0,_.M)(i=>{i&&1==i.status&&(this.tokenStorage.setPin(t),console.log("PIN has been set successfully."))}))}isLoggedIn(){return!!this.tokenStorage.getToken()}getToken(){return this.tokenStorage.getToken()}getPin(){return this.tokenStorage.getPin()}getUser(){return this.tokenStorage.getUserData()}}return(o=h).\u0275fac=function(t){return new(t||o)(a.KVO(e.E),a.KVO(P.I),a.KVO(E.Ix))},o.\u0275prov=a.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),h})()},7360:(d,u,n)=>{n.d(u,{E:()=>p});var g=n(1626),_=n(8810),a=n(6354),e=n(9437),P=n(4438),E=n(4743);let p=(()=>{var o;class h{constructor(t,r){this.http=t,this.tokenStorage=r}post(t,r,i){let s=this.createHeaders();if(i){const l=this.tokenStorage.getToken();l&&(s=this.createHeaders(l))}return this.http.post(t,r,{headers:s}).pipe((0,a.T)(l=>l),(0,e.W)(this.handleError))}get(t,r){let i=this.createHeaders();if(r){const s=this.tokenStorage.getToken();s&&(i=this.createHeaders(s))}return this.http.get(t,{headers:i}).pipe((0,a.T)(s=>s),(0,e.W)(this.handleError))}createHeaders(t){let r=new g.Lr({"Content-Type":"application/json"});return t&&(r=r.append("Authorization",`Bearer ${t}`)),r}handleError(t){let r;return r=t.error instanceof ErrorEvent?`Client-side error: ${t.error.message}`:`Server returned code: ${t.status}, error message: ${t.message}`,console.error(r),(0,_.$)(()=>new Error(r))}}return(o=h).\u0275fac=function(t){return new(t||o)(P.KVO(g.Qq),P.KVO(E.I))},o.\u0275prov=P.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),h})()},5312:(d,u,n)=>{n.d(u,{c:()=>g});const g={production:!0,baseUrl:"https://dilabar.pythonanywhere.com/"}}}]);