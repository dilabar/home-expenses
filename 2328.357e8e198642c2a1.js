"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2328],{2328:(y,h,a)=>{a.r(h),a.d(h,{EarningsPage:()=>f});var E=a(467),v=a(177),m=a(4341),e=a(4702),g=a(5873),b=a(5079),n=a(4438);let u=(()=>{var r;class c{constructor(t){this.modalController=t,this.earningType="salary",this.earningSource="",(0,b.a)({"close-outline":g.xfX})}ngOnInit(){}closeModal(){this.modalController.dismiss()}saveEarning(){this.modalController.dismiss({type:this.earningType,source:this.earningSource,amount:this.earningAmount})}}return(r=c).\u0275fac=function(t){return new(t||r)(n.rXU(e.W3))},r.\u0275cmp=n.VBU({type:r,selectors:[["app-add-earning-modal"]],standalone:!0,features:[n.aNF],decls:29,vars:3,consts:[[1,"custom-toolbar"],[1,"custom-title"],["slot","end"],["fill","clear",3,"click"],["name","close-outline"],[1,"earning-container"],[1,"custom-item"],["position","floating"],["interface","popover",3,"ngModelChange","ngModel"],["value","salary"],["value","freelance"],["type","text",3,"ngModelChange","ngModel"],["type","number",3,"ngModelChange","ngModel"],[1,"custom-footer"],["expand","block",1,"custom-save-button",3,"click"],["slot","start","name","wallet-outline"]],template:function(t,o){1&t&&(n.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title",1),n.EFF(3,"Add Earning"),n.k0s(),n.j41(4,"ion-buttons",2)(5,"ion-button",3),n.bIt("click",function(){return o.closeModal()}),n.nrm(6,"ion-icon",4),n.k0s()()()(),n.j41(7,"ion-content")(8,"div",5)(9,"ion-item",6)(10,"ion-label",7),n.EFF(11,"Earning Type"),n.k0s(),n.j41(12,"ion-select",8),n.mxI("ngModelChange",function(l){return n.DH7(o.earningType,l)||(o.earningType=l),l}),n.j41(13,"ion-select-option",9),n.EFF(14,"Salary"),n.k0s(),n.j41(15,"ion-select-option",10),n.EFF(16,"Freelance"),n.k0s()()(),n.j41(17,"ion-item",6)(18,"ion-label",7),n.EFF(19,"Source"),n.k0s(),n.j41(20,"ion-input",11),n.mxI("ngModelChange",function(l){return n.DH7(o.earningSource,l)||(o.earningSource=l),l}),n.k0s()(),n.j41(21,"ion-item",6)(22,"ion-label",7),n.EFF(23,"Amount"),n.k0s(),n.j41(24,"ion-input",12),n.mxI("ngModelChange",function(l){return n.DH7(o.earningAmount,l)||(o.earningAmount=l),l}),n.k0s()()()(),n.j41(25,"ion-footer",13)(26,"ion-button",14),n.bIt("click",function(){return o.saveEarning()}),n.nrm(27,"ion-icon",15),n.EFF(28," Save Earning "),n.k0s()()),2&t&&(n.R7$(12),n.R50("ngModel",o.earningType),n.R7$(8),n.R50("ngModel",o.earningSource),n.R7$(4),n.R50("ngModel",o.earningAmount))},dependencies:[v.MD,m.YN,m.BC,m.vS,e.eU,e.W9,e.uz,e.ai,e.he,e.Jm,e.BC,e.$w,e.QW,e.iq,e.Nm,e.Ip,e.M0],styles:[".custom-toolbar[_ngcontent-%COMP%]{box-shadow:0 4px 12px #0000001a}ion-button[_ngcontent-%COMP%]{--border-radius: 12px;--padding-start: 20px;--padding-end: 20px}.custom-item[_ngcontent-%COMP%]{--padding-start: 12px;--padding-end: 12px;margin-bottom:12px;border-radius:12px;box-shadow:0 4px 8px #0000000d;background-color:var(--ion-color-light)}.custom-save-button[_ngcontent-%COMP%]{--background: linear-gradient(45deg, var(--ion-color-success), var(--ion-color-tertiary));--color: white;font-size:1.2rem;font-weight:700;border-radius:12px;transition:background .3s ease}.custom-save-button[_ngcontent-%COMP%]:hover{background:var(--ion-color-success-shade)}.earning-container[_ngcontent-%COMP%]{padding:20px}ion-label[_ngcontent-%COMP%]{color:var(--ion-color-medium)}"]}),c})();var M=a(7738),_=a(5312),i=a(7360);let s=(()=>{var r;class c{constructor(t){this.reqResService=t,this.apiUrl=_.c.baseUrl+"api/"}addEarning(t,o){return this.reqResService.post(`${this.apiUrl}add_earning`,t,o)}getEarnings(){return this.reqResService.get(`${this.apiUrl}source_wise_totals`,!0)}}return(r=c).\u0275fac=function(t){return new(t||r)(n.KVO(i.E))},r.\u0275prov=n.jDH({token:r,factory:r.\u0275fac,providedIn:"root"}),c})(),f=(()=>{var r;class c{constructor(t,o,d){this.expenseService=t,this.earningservice=o,this.modalController=d,this.salaryEarnings=[],this.freelanceEarnings=[],this.filteredEarnings=[],this.months=[{label:"January",value:"01"},{label:"February",value:"02"},{label:"March",value:"03"},{label:"April",value:"04"},{label:"May",value:"05"},{label:"June",value:"06"},{label:"July",value:"07"},{label:"August",value:"08"},{label:"September",value:"09"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}],(0,b.a)({home:g.iRW,"wallet-outline":g.eF1,add:g.WQq})}ngOnInit(){this.loadEarnings()}ionViewWillEnter(){this.loadEarnings()}loadEarnings(){this.earningservice.getEarnings().subscribe(o=>{o.status&&(this.salaryAmount=o.salary_total,this.freelanceAmount=o.freelance_total)});const t=(new Date).toISOString().slice(5,7);this.selectedMonth=t,this.filterEarningsByMonth()}filterEarningsByMonth(){}openAddEarningModal(){var t=this;return(0,E.A)(function*(){const o=yield t.modalController.create({component:u});yield o.present();const{data:d}=yield o.onWillDismiss();d&&(yield t.earningservice.addEarning(d,!0).subscribe(l=>{l.status&&(console.log(l),t.loadEarnings())}))})()}handleRefresh(t){setTimeout(()=>{this.loadEarnings(),t.target.complete()},2e3)}}return(r=c).\u0275fac=function(t){return new(t||r)(n.rXU(M.k),n.rXU(s),n.rXU(e.W3))},r.\u0275cmp=n.VBU({type:r,selectors:[["app-earnings"]],standalone:!0,features:[n.aNF],decls:35,vars:10,consts:[[3,"translucent"],[1,"custom-toolbar"],["slot","start"],["defaultHref","tabs/home"],[1,"custom-title"],["slot","end"],[3,"click"],["name","settings-outline"],[1,"ion-padding",3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[1,"earnings-card"],["color","light"],[1,"card-title"],["name","cash-outline"],[1,"amount-display"],[1,"amount"],["name","briefcase-outline"],["vertical","bottom","horizontal","end","slot","fixed"],["color","success",3,"click"],["name","add","color","light"]],template:function(t,o){1&t&&(n.j41(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),n.nrm(3,"ion-back-button",3),n.k0s(),n.j41(4,"ion-title",4),n.EFF(5,"Transaction History"),n.k0s(),n.j41(6,"ion-buttons",5)(7,"ion-button",6),n.bIt("click",function(){return o.openAddEarningModal()}),n.nrm(8,"ion-icon",7),n.k0s()()()(),n.j41(9,"ion-content",8)(10,"ion-refresher",9),n.bIt("ionRefresh",function(l){return o.handleRefresh(l)}),n.nrm(11,"ion-refresher-content"),n.k0s(),n.j41(12,"ion-card",10)(13,"ion-card-header",11)(14,"ion-card-title",12),n.nrm(15,"ion-icon",13),n.EFF(16," Salary Earnings "),n.k0s()(),n.j41(17,"ion-card-content")(18,"div",14)(19,"p",15),n.EFF(20),n.nI1(21,"currency"),n.k0s()()()(),n.j41(22,"ion-card",10)(23,"ion-card-header",11)(24,"ion-card-title",12),n.nrm(25,"ion-icon",16),n.EFF(26," Freelance Earnings "),n.k0s()(),n.j41(27,"ion-card-content")(28,"div",14)(29,"p",15),n.EFF(30),n.nI1(31,"currency"),n.k0s()()()(),n.j41(32,"ion-fab",17)(33,"ion-fab-button",18),n.bIt("click",function(){return o.openAddEarningModal()}),n.nrm(34,"ion-icon",19),n.k0s()()()),2&t&&(n.Y8G("translucent",!0),n.R7$(9),n.Y8G("fullscreen",!0),n.R7$(11),n.JRh(n.i5U(21,4,o.salaryAmount,"INR")),n.R7$(10),n.JRh(n.i5U(31,7,o.freelanceAmount,"INR")))},dependencies:[v.MD,v.oe,m.YN,e.iq,e.ai,e.QW,e.Jm,e.BC,e.W9,e.eU,e.b_,e.I9,e.ME,e.tN,e.To,e.Ki,e.Q8,e.YW,e.el],styles:["ion-card[_ngcontent-%COMP%]{margin-bottom:16px;border-radius:15px;box-shadow:0 2px 12px #0000001a}.card-title[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.2rem}.amount-display[_ngcontent-%COMP%]{text-align:center;font-weight:700;font-size:1.5rem;color:#2c3e50}"]}),c})()},7360:(y,h,a)=>{a.d(h,{E:()=>n});var E=a(1626),v=a(8810),m=a(6354),e=a(9437),g=a(4438),b=a(4743);let n=(()=>{var u;class M{constructor(i,s){this.http=i,this.tokenStorage=s}post(i,s,f){let r=this.createHeaders();if(f){const c=this.tokenStorage.getToken();c&&(r=this.createHeaders(c))}return this.http.post(i,s,{headers:r}).pipe((0,m.T)(c=>c),(0,e.W)(this.handleError))}get(i,s){let f=this.createHeaders();if(s){const r=this.tokenStorage.getToken();r&&(f=this.createHeaders(r))}return this.http.get(i,{headers:f}).pipe((0,m.T)(r=>r),(0,e.W)(this.handleError))}createHeaders(i){let s=new E.Lr({"Content-Type":"application/json"});return i&&(s=s.append("Authorization",`Bearer ${i}`)),s}handleError(i){let s;return s=i.error instanceof ErrorEvent?`Client-side error: ${i.error.message}`:`Server returned code: ${i.status}, error message: ${i.message}`,console.error(s),(0,v.$)(()=>new Error(s))}}return(u=M).\u0275fac=function(i){return new(i||u)(g.KVO(E.Qq),g.KVO(b.I))},u.\u0275prov=g.jDH({token:u,factory:u.\u0275fac,providedIn:"root"}),M})()},5312:(y,h,a)=>{a.d(h,{c:()=>E});const E={production:!0,baseUrl:"https://dilabar.pythonanywhere.com/"}}}]);